# あすけんコーディングテスト課題　回答アプリ＆サービス改善提案機能の実装アプリ

|コーディングテスト課題回答アプリ（納豆ご飯の総カロリー計算）|サービス改善提案機能の実装アプリ（自然言語入力でのお手軽版食材データ自動生成機能）|
|:-:|:-:|
|<video src="https://github.com/user-attachments/assets/e6b501e3-5d08-4f8a-bac5-d1534f116781">|<video src="https://github.com/user-attachments/assets/07eac5e7-c9ff-443c-a0e9-129750640810">|

# 概要
あすけんコーディングテスト課題の実装を含んだレポジトリです。

少し面白くしたかった為、

- 課題の回答時のロジックを使った納豆ご飯の総カロリー計算アプリ
- サービス改善提案機能を実装したアプリ（自然言語入力でのお手軽版食材データ自動生成機能）

を一緒に実装しました。

# テスト課題の各設問と、ソースコードの対応について

- 問題１（摂取量(g)からカロリー(kcal)を計算するクラス作成）

 ・ファイル名：[GramToKcalConverter.swift](Sample_CodingTest1/CodingTestAnswer/CodingTestAnswerLogic/GramToKcalConverter.swift)

>「三大栄養素」それぞれについて、摂取量(g)からカロリー(kcal)を計算するクラスを作成し
> てください。
> 尚、桁数についてはそれぞれ以下の通りとします。
> ● 摂取量(g) : 小数第一位 (小数第二位を四捨五入)
> ● カロリー(kcal) : 整数 (小数第一位を四捨五入)

==================

- 問題２（「問題1」で作成したクラスを使用して、「納豆ご飯」の総カロリー(kcal)を計算するコード）

 ・ファイル名：[FixedGramIngredient.swift](Sample_CodingTest1/CodingTestAnswer/CodingTestAnswerLogic_SampleApp/TotalKcalSimulation/FixedGramIngredient.swift)（ getTotalKcal()メソッド）
 　　=> 各食材ごとのPFCのグラム値からカロリーの合計値を計算
 
 ・ファイル名：[TotalKcalSimulationViewModel.swift](Sample_CodingTest1/CodingTestAnswer/CodingTestAnswerLogic_SampleApp/TotalKcalSimulation/TotalKcalSimulationViewModel.swift)（updateTotalKcal()メソッド）
 　　=> 画面で現在選択中ステータスの食材一覧の総カロリーを計算して画面更新

> 「問題1」で作成したクラスを使用して、以下の「納豆ご飯」の総カロリー(kcal)を計算する
> コードを書いてください。
> ● 白米
> ○ P : 2.5g
> ○ F : 0.3g
> ○ C : 37.1g
> ● 納豆
> ○ P : 16.5g
> ○ F : 10.0g
> ○ C : 12.1g

==================

- 問題３（テストコード）

 ・ファイル名：[GramToKcalConverterTests.swift](Sample_CodingTest1Tests/GramToKcalConverterTests.swift)

> 「問題1, 2」を通して作成したクラスの簡単なテストコードを書いてください。 また、可能な限
> りテスト観点についてコメントに記載してください。 コーディングテスト終了後に、どのような
> 観点や意図を持っているかをお聞きいたします。


# サービス改善提案機能アプリについて

### 作ったモチベーション
自分のめんどくさがりな性格と、自分の食事スタイル（1つのお皿にあれこれごちゃ混ぜにする食事）では、画像解析も手動検索も記録を続けることが難しかった。
いきなり正確な記録付けがスタートすることに戸惑った。
もっとお手軽に、そして「結果の正確さ・詳細さ」を少し落とす代わりにお試しというか、もう少しハードルを下げたアプローチも欲しいと思った。

具体的に困った自分の場合のシチュエーション

- 例えば、オートミールとフルグラに豆乳をかけた食事は、写真だと下のオートミールは映らないので解析してもらえないが、自然言語で文章で書いてしまえば早い。（私の普段の朝食です）

- 1つの器に色々と混ぜ込んでるやつ（洗うのが楽なので）も同様に画像解析が難しいと思うので、（私の普段の昼ごはんです）
    - 「キャベツ系のミックスサラダとサラダ豆とおにぎり昆布と、ブルーチーズにオリーブオイルとごまわさびドレッシングをかけたものを、ラーメンどんぶりにたくさん入れて食べました」という自然言語ならスラスラかける。これを1つ1つ検索で選ぶのもなかなか大変。


### こだわり

- 生成AIを使う範囲を限定することで、結果の信憑性に対するユーザーの不安を払拭する。

食べた食事や食材の内容・量（器の大きさなど）などをおおまかに自然言語で受け取り、それをあくまでも本来のあすけんで行われるような食事記録への入力内容形式に変換するところだけを生成AIに担当させる。

各食材が持つ栄養素の情報や計算などの重要な部分はasken社が持つ豊富なデータベース（信頼できる情報源と計算ロジック）をもとに結果を表示する。そうすることで、ユーザーも安心して使えるかなと思いました。


### 備考

今回はVectorDataBaseなどを使ったベクトル類似度検索が間に合わなかったので割愛しており、生成AIから返してもらった食材名の文字列部分一致でDB内検索（ローカル）になっているが、ベクトル類似度検索などが使えれば、
既存のaskenサービスみたいな食材選択肢の仕様（例えば、結構ピンポイントな食材名、「〇〇の〇〇揚げ、〇〇和え」など）も、多少入力内容や、AIからの抽出結果の文字列が違ってもいい感じに検索してそれっぽい食材の候補を引っ張ってこれるのかも？と思っています。
